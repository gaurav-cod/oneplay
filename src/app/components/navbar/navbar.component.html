<nav
  class="navbar navbar-expand-md navbar-dark d-none d-md-flex"
  id="navbar-main"
>
  <div class="container-fluid">
    <!-- Brand -->
    <a class="navbar-brand" [routerLink]="['/home']">
      <img class="img-fluid" src="assets/img/brand/Group 134.svg" alt=" " />
    </a>

    <!-- Links -->
    <ul class="navbar-nav d-none d-md-flex">
      <li class="nav-item">
        <a routerLinkActive="active" [routerLink]="['/home']" class="nav-link"
          >Home</a
        >
      </li>
      <li class="nav-item">
        <a routerLinkActive="active" [routerLink]="['/store']" class="nav-link"
          >Store</a
        >
      </li>
      <li class="nav-item">
        <a
          routerLinkActive="active"
          [routerLink]="['/streams']"
          class="nav-link"
          >Streams</a
        >
      </li>
    </ul>

    <!-- Form -->
    <form
      class="navbar-search form-inline mr-3 d-none d-md-flex ml-lg-auto position-relative"
    >
      <div
        class="form-group mb-0"
        [ngClass]="{ focused: (isFocused | async) === true }"
      >
        <div class="input-group input-group-alternative border-0 bg-darker">
          <input
            #search
            class="form-control"
            placeholder="Search"
            type="text"
            [formControl]="query"
            (focus)="onFocus()"
            (blur)="onBlur()"
          />
          <div class="input-group-prepend">
            <a class="input-group-text"><i class="fas fa-search"></i></a>
          </div>
        </div>
      </div>
      <ul
        *ngIf="results.length || uResults.length"
        class="position-absolute w-100 card list-group border-0"
        style="top: calc(100% + 8px)"
      >
        <li
          *ngFor="let game of results"
          class="list-group-item bg-dark d-flex border-0"
          [routerLink]="['/view/' + (game | glink)]"
          [queryParams]="keywordQuery"
          style="cursor: pointer"
        >
          <img
            [src]="game.textBgImage"
            class="mr-3"
            width="80"
            height="50"
            alt=""
          />
          <div>
            <p class="list-group-heading text-white m-0">{{ game.title }}</p>
            <p class="list-group-content text-white-50 small m-0">
              {{ game.releaseDate.getFullYear() }}
            </p>
          </div>
        </li>
        <li *ngIf="results.length === 5" class="text-center bg-dark py-2">
          <button
            class="btn btn-sm btn-outline-success"
            (click)="searchNavigate('games')"
          >
            See more games
          </button>
        </li>
        <li
          *ngFor="let user of uResults"
          class="list-group-item bg-dark d-flex border-0"
        >
          <img
            [src]="user.photo || (user.name | avatar)"
            class="mr-3"
            width="80"
            height="50"
            alt=""
          />
          <div class="flex-grow-1">
            <p class="list-group-heading text-white m-0">{{ user.name }}</p>
            <p class="list-group-content text-white-50 small m-0">
              {{ user.username }}
            </p>
          </div>
          <button
            type="button"
            class="btn btn-sm btn-outline-light"
            (click)="addFriend(user)"
          >
            <i class="fas {{ getFriendAddIcon(user) }}"></i>
          </button>
        </li>
        <li *ngIf="uResults.length === 5" class="text-center bg-dark py-2">
          <button
            class="btn btn-sm btn-outline-success"
            (click)="searchNavigate('users')"
          >
            See more users
          </button>
        </li>
      </ul>
    </form>
    <!-- User -->
    <ul class="navbar-nav align-items-center d-none d-md-flex">
      <li class="nav-item">
        <a class="nav-link" (click)="toggleFriendsList()">
          <span class="avatar avatar-sm rounded-circle bg-gray-dark">
            <i class="fas fa-user-friends"></i>
          </span>
        </a>
      </li>
      <li class="nav-item">
        <a
          class="nav-link"
          [routerLink]="gameLink"
          ngbTooltip="{{ gamePlayTooltip }}"
        >
          <span
            class="avatar avatar-sm rounded-circle bg-gray-dark position-relative"
          >
            <i
              class="fa fa-gamepad"
              aria-hidden="true"
              [ngClass]="{
                'text-success': isGameRunning,
                'text-muted': !isGameRunning
              }"
            ></i>
            <span *ngIf="isUserLive" id="live">LIVE</span>
          </span>
        </a>
      </li>
      <!-- notifications dropdown -->
      <li class="nav-item" ngbDropdown placement="bottom-rigth">
        <a class="nav-link" role="button" ngbDropdownToggle>
          <span class="avatar avatar-sm rounded-circle bg-gray-dark">
            <i class="fas fa-bell"></i>
          </span>
        </a>
        <div class="dropdown-menu-arrow dropdown-menu-right" ngbDropdownMenu>
          <div class="dropdown-header noti-title">
            <h6 class="text-overflow m-0">Notifications</h6>
          </div>
          <div class="dropdown-divider"></div>
          <a
            *ngFor="let notification of notifications"
            class="dropdown-item"
            [routerLink]="['/view/' + (notification.game | glink)]"
          >
            <div class="notification-content"></div>
          </a>
        </div>
      </li>
      <li class="nav-item" ngbDropdown placement="bottom-right">
        <a class="nav-link pr-0" role="button" ngbDropdownToggle>
          <span class="avatar avatar-sm rounded-circle">
            <img alt="Image placeholder" [src]="title | avatar" />
          </span>
        </a>
        <div class="dropdown-menu-arrow dropdown-menu-right" ngbDropdownMenu>
          <div class="dropdown-header noti-title">
            <h6 class="text-overflow m-0">{{ title }}</h6>
          </div>
          <a
            routerLinkActive="active"
            [routerLink]="['/user-profile']"
            class="dropdown-item"
          >
            <i class="ni ni-settings"></i>
            <span>Settings</span>
          </a>
          <a
            routerLinkActive="active"
            [routerLink]="['/wishlist']"
            class="dropdown-item"
          >
            <i class="ni ni-favourite-28"></i>
            <span>Your Wishlist</span>
          </a>
          <a
            href="javascript:void(0)"
            class="dropdown-item"
            (click)="open(share)"
          >
            <i class="fa fa-link" aria-hidden="true"></i>
            <span>Referral Link</span>
          </a>
          <a href="https://www.oneplay.in/speed-test/run" class="dropdown-item">
            <i class="fas fa-tachometer-alt"></i>
            <span>Speed Test</span>
          </a>
          <a
            href="https://www.oneplay.in/subscription.html"
            class="dropdown-item"
          >
            <i class="ni ni-credit-card"></i>
            <span>Subscription</span>
          </a>
          <a href="https://www.oneplay.in/download.html" class="dropdown-item">
            <i class="ni ni-cloud-download-95"></i>
            <span>Downloads</span>
          </a>
          <div class="dropdown-divider"></div>
          <a href="javascript:void(0)" class="dropdown-item" (click)="logout()">
            <i class="ni ni-button-power"></i>
            <span>Logout</span>
          </a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<ng-template #share let-d="dismiss">
  <div class="modal-content position-relative">
    <div
      class="position-absolute btn btn-github rounded-circle top--5 right--6"
      style="padding: 16px 20px"
      (click)="d('Cross click')"
    >
      <i class="fas fa-times" style="font-size: 24px"></i>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-12">
          <h2 class="text-dark mb-4">Share/Copy Referral Link</h2>
        </div>
      </div>
      <share-buttons
        [url]="link"
        [include]="[
          'facebook',
          'twitter',
          'linkedin',
          'telegram',
          'messenger',
          'whatsapp',
          'email',
          'copy'
        ]"
        theme="material-dark"
        show="11"
      ></share-buttons>
    </div>
  </div>
</ng-template>
